"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["1655"],{60652(e,t,r){r.d(t,{f:()=>n});let n=r(3255).$h.create("code-view")},75701(e,t,r){r.d(t,{Rw:()=>u,eX:()=>c});var n=r(32764),o=r(12246),i=r(97955),a=r(68695),s=r(89835),l=r(95511);let u={queryName:"fileTree",queryDeps:({pathname:e,params:t})=>({pathname:`${e}/_file_tree`,params:t}),queryFn:async({queryDeps:e})=>{let{params:t}=e,r=t["*"]||"";return await c({owner:t.owner,repo:t.repo,path:r}),null},staleTime:0,gcTime:0};async function c({owner:e,repo:t,path:r}){let n=(0,o.SX)(),i=s.O.queries.mainQuery.makeQueryKey({pathname:`/${e}/${t}/_file_tree_layout`}),a=n.getQueryData(i),u=l.W.queries.mainQuery.makeQueryKey({pathname:`/${e}/${t}/_layout`}),c=n.getQueryData(u);if(!a||!c)return null;let h=c.payload.refInfo.name,p=function(e,t){if(!e)return null;let r=e.split("/"),n="",o="",i=null;for(let e of r){if((n=n?`${n}/${e}`:e)in t){o=n;continue}let r=t[o];if(r){let e=r.items.find(e=>e.path===n);if(e){if("file"===e.contentType)break}else{i=o||n;break}}i||(i=n),o=n}return i?{start:e,stop:i}:null}(r,a.payload.fileTree);if(!p)return null;let{fileTree:d,foldersToFetch:m}=await f({owner:e,repo:t,branch:h,pathsToLoad:p});return n.setQueryData(i,e=>e?{...e,payload:{...e.payload,fileTree:function(e,t){let r={...e};for(let e of Object.keys(t).sort((e,t)=>e<t?1:-1)){let{dir:n,name:o}=function(e){let t=e.split("/"),r=t.pop()||"";return{dir:t.join("/"),name:r}}(e),i=r[n];i&&(r[n]=function(e,t){if(e.items.some(e=>e.path===t.path))return e;let r=[...e.items,t];return r.sort((e,t)=>e.contentType===t.contentType?e.name<t.name?-1:1:"directory"===e.contentType&&"directory"!==t.contentType?-1:1),{items:r,totalCount:r.length}}(i,{path:e,name:o,contentType:"directory"})),t[e]&&(r[e]=t[e])}return r}(e.payload.fileTree,d),foldersToFetch:[...new Set([...e.payload.foldersToFetch,...m])]}}:e),null}async function f({owner:e,repo:t,branch:r,pathsToLoad:n}){if(n.start===n.stop)return h({owner:e,repo:t,branch:r,path:n.start});let o=await (0,a.lS)(`/${e}/${t}/_file_tree`,{method:"POST",body:{branch:r,start:n.start,stop:n.stop}});if(!o.ok)throw Error(`Failed to fetch file tree: ${o.status} ${o.statusText}`);let i=await o.json();if(!i?.payload?.fileTree)throw Error("Unable to find payload for fileTree query");return i.payload.fileTree}async function h({owner:e,repo:t,branch:r,path:o}){let a=(0,n.IO9)({repo:{ownerLogin:e,name:t},commitish:r,action:"tree",path:o});return{fileTree:{[o]:(await (0,i.f)(a)).tree},foldersToFetch:[]}}},89835(e,t,r){r.d(t,{O:()=>o});var n=r(45540);let o=r(60652).f.createQueryRouteConfig("codeViewFileTreeLayoutRoute",{path:"/:owner/:repo",queries:[(0,n.Y)({queryDeps:({pathname:e})=>({pathname:`${e}/_file_tree_layout`})})]})},95511(e,t,r){r.d(t,{W:()=>o});var n=r(45540);let o=r(60652).f.createQueryRouteConfig("codeViewLayoutRoute",{path:"/:owner/:repo",queries:[(0,n.Y)({queryDeps:({pathname:e})=>({pathname:`${e}/_layout`})})]})},37491(e,t,r){function n(){return Promise.resolve()}function o(){return new Promise(window.requestAnimationFrame)}async function i(e,t){let r,n=new Promise(t=>{r=self.setTimeout(t,e)});if(!t)return n;try{var o;await Promise.race([n,(o=t,new Promise((e,t)=>{let r=Error("aborted");r.name="AbortError",o.aborted?t(r):o.addEventListener("abort",()=>t(r))}))])}catch(e){throw self.clearTimeout(r),e}}function a(e){let t=[];return function(r){t.push(r),1===t.length&&queueMicrotask(()=>{let r=t.slice(0);t.length=0,e(r)})}}r.d(t,{G$:()=>o,k2:()=>n,rK:()=>a,uk:()=>i})},68319(e,t,r){r.d(t,{A:()=>a,K:()=>o});var n=r(50467);function o(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}let i=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,n._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};function a(e,t,r=!1){let n=t.headers.get("content-type")||"";if(!r&&!n.startsWith("text/html"))throw new i(`expected response with text/html, but was ${n}`,t);if(r&&!(n.startsWith("text/html")||n.startsWith("application/json")))throw new i(`expected response with text/html or application/json, but was ${n}`,t);let o=t.headers.get("x-html-safe");if(o){if(!e.includes(o))throw new i("response X-HTML-Safe nonce did not match",t)}else throw new i("missing X-HTML-Safe nonce",t)}},45397(e,t,r){r.d(t,{z:()=>p});var n=r(35750),o=r(18150),i=r(14845),a=r(23131),s=r(68439);let l="VERSION_MISMATCH_LAST_TRIGGERED",u=(0,s.A)("localStorage",{ttl:9e7,throwQuotaErrorsOnSet:!1}),c=null;let VersionMismatchRateLimiter=class VersionMismatchRateLimiter{canTrigger(){let e=this.getLastTriggerTime();return null===e||Date.now()-e>=864e5}recordTrigger(){let e=Date.now();u.setItem(l,e.toString()),c=e}getLastTriggerTime(){let e=u.getItem(l);if(e){let t=parseInt(e,10);return isNaN(t)?null:t}return c}clearTriggerRecord(){u.removeItem(l),c=null}};let f=new VersionMismatchRateLimiter;var h=new WeakMap;let p=new class VersionMismatchDetector{registerApp(e,t){(0,n._)(this,h).set(e,t)}unregisterApp(e){(0,n._)(this,h).delete(e)}checkResponse(e,t){if("true"!==e.headers.get("X-GitHub-Version-Mismatch")||!(0,a.G7)("react_version_mismatch_detection")||!f.canTrigger())return!1;let r={clientVersion:(0,i.O)(),serverVersion:e.headers.get("X-GitHub-Server-Version")||void 0,requestUrl:e.url,responseHeaders:e.headers,appName:t};if(f.recordTrigger(),t){let e=(0,n._)(this,h).get(t);if(e)return e.onMismatchDetected(r),!0}else{let e=!1;for(let[t,o]of(0,n._)(this,h).entries()){let n={...r,appName:t};o.onMismatchDetected(n),e=!0}return e}return!1}constructor(){(0,o._)(this,h,{writable:!0,value:new Map})}}},65510(e,t,r){r.d(t,{U:()=>a});var n=r(1651),o=r(15985),i=r(60791);function a(e,t){return(0,o.t)({...e,enabled:!0,suspense:!0,throwOnError:i.R3,placeholderData:void 0},n.$,t)}}}]);
//# sourceMappingURL=chunk-1655-96db0503b2e145f4-0cee7e753f97e945.js.map